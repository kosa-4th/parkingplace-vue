version: 1
frontend:
  phases:
    preBuild:
      commands:
        - npm ci --cache .npm --prefer-offline  # 의존성 설치
    build:
      commands:
        - npm run build  # 빌드 명령어
  artifacts:
    baseDirectory: dist  # 빌드된 파일의 경로
    files:
      - '**/*'  # 모든 파일을 배포
  cache:
    paths:
      - node_modules/**/*  # 캐시할 경로 설정
  customHeaders:
    # 모든 파일에 대해 Cache-Control 헤더 추가
    - pattern: '**/*'
      headers:
        - key: 'Cache-Control'
          value: 'no-cache'  # 캐시를 사용하지 않도록 설정